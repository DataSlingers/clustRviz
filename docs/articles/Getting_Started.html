<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started â€¢ clustRviz</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">clustRviz</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/clusRvizDetails.html">clustRviz Details</a>
    </li>
    <li>
      <a href="../articles/Getting_Started.html">Getting Started</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Getting Started</h1>
                        <h4 class="author">John Nagorski</h4>
            
            <h4 class="date">2018-06-29</h4>
          </div>

    
    
<div class="contents">
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Clustering is important.</p>
<p>Convex clustering and biclustering offer an alternative to traditional clustering algorthims. Let <span class="math inline">\({\boldsymbol{X}} \equiv \left[{\boldsymbol{x}}_1,\dots, {\boldsymbol{x}}_n \right] \in \mathbb{R}^{p\times n}\)</span> denote our data matrix consisting of <span class="math inline">\(n\)</span> observations in <span class="math inline">\(p\)</span> dimensions. We seek an estimate <span class="math inline">\({\boldsymbol{U}} \equiv \left[{\boldsymbol{u}}_1,\dots, {\boldsymbol{u}}_n \right] \in \mathbb{R}^{p\times n}\)</span> which solves the following optimization problem: <span class="math display">\[
\underset{{\boldsymbol{U}}}{\textrm{minimize}} \;\;
\frac{1}{2} \| {\boldsymbol{X}} - {\boldsymbol{U}} \|_F^2 + 
\lambda \sum_{ l &lt; m} 
w_{l,m} \| {\boldsymbol{u}}_l - {\boldsymbol{u}}_m \|_2
\]</span></p>
<p>where <span class="math inline">\(\lambda &gt; 0\)</span> is a regularization parameter, and <span class="math inline">\(w_{l,m} &gt; 0\)</span> denote pairwise weights.</p>
<p>Convex clustering has many advanatges.</p>
<ul>
<li>Novel visuals</li>
<li>mathematical</li>
</ul>
<p>However, it can be slow.</p>
<p>In this vignette we introduce the <code>clustRviz</code> package which delivers fast approixmations to the convex clustering solution path as well as easy visualizations, both static and interactive.</p>
<p>In what follows we will give a quick introduction to the package and its capabilities; a more detailed treatment can be found in the Details vignette.</p>
<p>Throughout both vignettes we will utilize the presidential speech dataset included in the <code>clustRviz</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(clustRviz)
<span class="kw">data</span>(<span class="st">"presidential_speech"</span>)</code></pre></div>
<p>The presidential speech data set contains the top 75 most variable log-transformed word counts of each US president, aggregated over several speeches. Additional text processing such as removing stop words and stemming have been done via the <code>tm</code> package.<br>
We quickly examine the speech data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Xdat &lt;-<span class="st"> </span>presidential_speech
<span class="kw">dim</span>(Xdat)
<span class="co">#&gt; [1] 44 75</span>
Xdat[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]
<span class="co">#&gt;                     amount appropri  british     cent commerci</span>
<span class="co">#&gt; Abraham Lincoln   3.433987 2.397895 1.791759 2.564949 2.708050</span>
<span class="co">#&gt; Andrew Jackson    4.248495 4.663439 2.995732 1.945910 3.828641</span>
<span class="co">#&gt; Andrew Johnson    4.025352 3.091042 2.833213 3.332205 2.772589</span>
<span class="co">#&gt; Barack Obama      1.386294 0.000000 0.000000 1.386294 0.000000</span>
<span class="co">#&gt; Benjamin Harrison 4.060443 4.174387 2.302585 4.304065 3.663562</span></code></pre></div>
<p>Here we see the columns correspond to stemmed words and rows correspond to presidents.</p>
</div>
<div id="carp---the-basics" class="section level2">
<h2 class="hasAnchor">
<a href="#carp---the-basics" class="anchor"></a>CARP - The Basics</h2>
<p>We begin by clustering. As discussed in Details, many user-specified options can be passed to CARP, including weights, algorithm type, and various pre-processing options. These can be seen via</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><a href="../reference/CARP.html">?CARP</a></code></pre></div>
<p>By default, however, CARP makes reasonable default choices and be run out of the box.</p>
<p>We begin by fitting the CARP solution path to the presidents data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">carp.fit &lt;-<span class="st"> </span><span class="kw"><a href="../reference/CARP.html">CARP</a></span>(Xdat)
<span class="co">#&gt; Pre-computing weight-based edge sets</span>
<span class="co">#&gt; Computing CARP Path</span>
<span class="co">#&gt; Post-processing</span></code></pre></div>
<p>We can examine our CARP fit via</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(carp.fit)
<span class="co">#&gt; CARP Fit Summary</span>
<span class="co">#&gt; Number of Observations: 44</span>
<span class="co">#&gt; Number of Variables: 75</span>
<span class="co">#&gt; Pre-processing: center</span>
<span class="co">#&gt; Weights: RBF Kernel, phi = 0.001, k = 4</span>
<span class="co">#&gt; Algorithm: CARP-VIZ</span>
<span class="co">#&gt; Visualizations: Static DendStatic PathInteractive Dend/Path</span>
<span class="co">#&gt; Raw Data:</span>
<span class="co">#&gt;                     amount appropri  british     cent commerci</span>
<span class="co">#&gt; Abraham Lincoln   3.433987 2.397895 1.791759 2.564949 2.708050</span>
<span class="co">#&gt; Andrew Jackson    4.248495 4.663439 2.995732 1.945910 3.828641</span>
<span class="co">#&gt; Andrew Johnson    4.025352 3.091042 2.833213 3.332205 2.772589</span>
<span class="co">#&gt; Barack Obama      1.386294 0.000000 0.000000 1.386294 0.000000</span>
<span class="co">#&gt; Benjamin Harrison 4.060443 4.174387 2.302585 4.304065 3.663562</span></code></pre></div>
<p>this displays things like the algorithm used, weight calculations, pre-processing, as well as a brief data description.</p>
<p>Once fitted, a natural first step is to obtain clustering solutions. This is done via <code>Clustering</code> function. similar to <code>cutree</code>, <code>Clustering</code> can take the arguement <code>k</code> specifying the number of clusters desired.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">carp.cluster.ksol &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Clustering.html">Clustering</a></span>(carp.fit,<span class="dt">k=</span><span class="dv">5</span>)</code></pre></div>
<p>We can examine the cluster assignments</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(carp.cluster.ksol<span class="op">$</span>clustering.assignment)
<span class="co">#&gt; [1] "cl1" "cl1" "cl1" "cl2" "cl3" "cl3"</span></code></pre></div>
<p>and the cluster means</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(carp.cluster.ksol<span class="op">$</span>cluster.means)
<span class="co">#&gt;           cl1       cl2      cl3      cl4       cl5</span>
<span class="co">#&gt; [1,] 3.696392 1.8627224 4.038285 1.381924 0.0000000</span>
<span class="co">#&gt; [2,] 3.395965 2.0425014 4.075400 1.641153 0.6931472</span>
<span class="co">#&gt; [3,] 2.928241 0.5157932 2.300496 1.592841 0.0000000</span>
<span class="co">#&gt; [4,] 1.531153 0.7925161 3.551143 0.000000 2.1972246</span>
<span class="co">#&gt; [5,] 2.967835 0.9780746 3.356572 1.181679 2.3025851</span>
<span class="co">#&gt; [6,] 2.467062 0.1980421 3.096177 1.186066 0.0000000</span></code></pre></div>
<p>Besides specifying the number of clusters, CARP can also return clustering assignment based on the amount of regularization. Using the <code>percent</code> arguement we can specify the percent of regularization along the path at which to examine.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">carp.cluster.regsol &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Clustering.html">Clustering</a></span>(carp.fit,<span class="dt">percent=</span>.<span class="dv">3</span>)</code></pre></div>
<p>Cluster assignments and cluster means are returned as before</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(carp.cluster.regsol<span class="op">$</span>clustering.assignment)
<span class="co">#&gt; [1] "cl1" "cl1" "cl1" "cl2" "cl1" "cl1"</span>
<span class="kw">head</span>(carp.cluster.regsol<span class="op">$</span>cluster.means)
<span class="co">#&gt;           cl1       cl2      cl3       cl4</span>
<span class="co">#&gt; [1,] 3.874771 1.8627224 1.381924 0.0000000</span>
<span class="co">#&gt; [2,] 3.750453 2.0425014 1.641153 0.6931472</span>
<span class="co">#&gt; [3,] 2.600722 0.5157932 1.592841 0.0000000</span>
<span class="co">#&gt; [4,] 2.585061 0.7925161 0.000000 2.1972246</span>
<span class="co">#&gt; [5,] 3.170654 0.9780746 1.181679 2.3025851</span>
<span class="co">#&gt; [6,] 2.795296 0.1980421 1.186066 0.0000000</span></code></pre></div>
</div>
<div id="carp---visualizations" class="section level2">
<h2 class="hasAnchor">
<a href="#carp---visualizations" class="anchor"></a>CARP - Visualizations</h2>
<p>Along with fast computation, <code>clustRviz</code> also provides a variety of clustering and biclustring visualizations, both static and dynmaic. In the case of clustering, one of the basic visualizations we may obtain from our CARP solution path is the dendrogram. While a dendrogram representation is not guarenteed for Convex Clustering generally, <code>CARP</code>â€™s default algorithm (appropriately titled CARP-VIZ), algorithmically ensures that such a representation exists. In order visualize the dendrogram associated with the CARP solution path we simply plot the object:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(carp.fit)</code></pre></div>
<p><img src="Getting_Started_files/figure-html/carpdend-1.png" width="672" style="display: block; margin: auto;"></p>
<p>The dendrogram is the default visualization when calling the <code>plot</code> function on a CARP object. Additional visualizations may be displayed by specifying the <code>type</code> arguement. In particular the the clustering path visualization, a clustering visualization unique to fusion clustering algorithms, may be obtained by specifying <code>type=path</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(carp.fit,<span class="dt">type=</span><span class="st">'path'</span>)
<span class="kw">plot</span>(carp.fit,<span class="dt">type=</span><span class="st">'path'</span>,<span class="dt">percent=</span>.<span class="dv">05</span>,<span class="dt">axis =</span> <span class="kw">c</span>(<span class="st">'PC1'</span>,<span class="st">'PC4'</span>))</code></pre></div>
<p><img src="Getting_Started_files/figure-html/unnamed-chunk-2-1.png" width="960" style="display: block; margin: auto;"></p>
<p>The clustering path above shows our original data points (black) projected onto the first two principal components. As the amount of regularization increases observations begin to fuse together forming clusters. The red curves indicate the paths the observations take as they fuse together.</p>
<p>By default the entire the CARP path is plotted. We can examine portions of the path by specifying the percent of regularization via the <code>percent</code> arguement; other axis can also be specified.</p>
<p>Finally an interactive visualization of both CARP solutions paths and their associated dendrograms can displayed via the <code>type='interactive'</code> option. In this case <code>plot</code> lauches a shiny application which allows users to watch their data form clusters. The app consists of both Movie and Static tabs. In the Movie tab we can watch clusters form in real time as the CARP iterations (and hence regularization) increases. In the Static tab users can choose discrete numbers of clusters and view the path and dendrogram to which it corresponds. An example of the interactive CARP plot is given below.</p>
<iframe src="https://clustrviz.shinyapps.io/PathShiny/" width="100%" height="850px">
</iframe>
</div>
<div id="cbass" class="section level2">
<h2 class="hasAnchor">
<a href="#cbass" class="anchor"></a>CBASS</h2>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#carp---the-basics">CARP - The Basics</a></li>
      <li><a href="#carp---visualizations">CARP - Visualizations</a></li>
      <li><a href="#cbass">CBASS</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by John Nagorski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
