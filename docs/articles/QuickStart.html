<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>clustRviz Quick Start • clustRviz</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="clustRviz Quick Start">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">clustRviz</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/QuickStart.html">clustRviz Quick Start</a>
    </li>
    <li>
      <a href="../articles/clusRvizDetails.html">clustRviz Details</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>clustRviz Quick Start</h1>
                        <h4 class="author">John Nagorski</h4>
            
            <h4 class="date">2018-08-24</h4>
      
      
      <div class="hidden name"><code>QuickStart.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>This vignette provides a quick usage guide to the <code>clustRviz</code> package, including fitting and visualization. In the sections below we work through a simple example dataset, illustrating both clustering and biclustering in <code>clustRviz</code>. While many details and customizations are discussed in the <a href="clustRvizDetails.html">clustRviz Details Vignette</a>, for now we show how to quickly fit, visualize, and save in <code>clustRviz</code>.</p>
</div>
<div id="a-clustering-example" class="section level1">
<h1 class="hasAnchor">
<a href="#a-clustering-example" class="anchor"></a>A Clustering Example</h1>
<p><code>clustRviz</code> may be used for clustering together observations based on similarities among their features. <code>clustRviz</code> accomplishes this by solving the Convex Clustering problem quickly using the technique of Algorithmic Regularization. The resulting algorithm, Convex Clustering via Algorithmic Regularization Paths (or CARP) provides a continuous path of clustering solutions which may be visualized and interactively explored.</p>
<p>For our first example we use the <code>petrol</code> data set from the <code>MASS</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># optionally install MASS package</span>
<span class="co"># install.package('MASS')</span>
<span class="kw">data</span>(<span class="st">'petrol'</span>,<span class="dt">package=</span><span class="st">'MASS'</span>)
<span class="kw">head</span>(petrol)
<span class="co">#&gt;   No   SG  VP V10  EP    Y</span>
<span class="co">#&gt; 1  A 50.8 8.6 190 205 12.2</span>
<span class="co">#&gt; 2  A 50.8 8.6 190 275 22.3</span>
<span class="co">#&gt; 3  A 50.8 8.6 190 345 34.7</span>
<span class="co">#&gt; 4  A 50.8 8.6 190 407 45.7</span>
<span class="co">#&gt; 5  B 40.8 3.5 210 218  8.0</span>
<span class="co">#&gt; 6  B 40.8 3.5 210 273 13.1</span></code></pre></div>
<p>The dataset contains the yield (<code>Y</code>) of a petroleum refining process and with measurements for specific gravity (<code>SG</code>), vapour pressure (<code>VP</code>), crude volatility (<code>V10</code>), desired gasoline volatility (<code>EP</code>), as well as sample identification labels (<code>No</code>); see <code>?petrol</code>for details.</p>
<p>Before clustering our data, we extract the columns of interest (here <code>SG</code>, <code>VP</code>, <code>V10</code>, and <code>EP</code>), and create the input matrix:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create numeric input matrix</span>
Xdat &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(petrol[,<span class="kw">c</span>(<span class="st">'SG'</span>,<span class="st">'VP'</span>,<span class="st">'V10'</span>,<span class="st">'EP'</span>)])
<span class="kw">head</span>(Xdat)
<span class="co">#&gt;     SG  VP V10  EP</span>
<span class="co">#&gt; 1 50.8 8.6 190 205</span>
<span class="co">#&gt; 2 50.8 8.6 190 275</span>
<span class="co">#&gt; 3 50.8 8.6 190 345</span>
<span class="co">#&gt; 4 50.8 8.6 190 407</span>
<span class="co">#&gt; 5 40.8 3.5 210 218</span>
<span class="co">#&gt; 6 40.8 3.5 210 273</span></code></pre></div>
<div id="fitting-with-carp" class="section level3">
<h3 class="hasAnchor">
<a href="#fitting-with-carp" class="anchor"></a>Fitting with CARP</h3>
<p>Clustering is done via a simple call to the <code>CARP</code> function below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(clustRviz)
carp.fit &lt;-<span class="st"> </span><span class="kw"><a href="../reference/CARP.html">CARP</a></span>(
  Xdat,
  <span class="dt">control=</span><span class="kw">list</span>(
    <span class="dt">obs.labels =</span> petrol<span class="op">$</span>No,
    <span class="dt">X.scale=</span><span class="ot">TRUE</span>)
)</code></pre></div>
<p>Here we specify the sample number (<code>No</code>) as the labels for our observations. This is done by providing <code>obs.labels</code> to the <code>control</code> argument. While not necessary, providing labels adds clarity to many visualizations. Additionally, since our variables are measured on different scales, we set the <code>X.scale</code> option to <code>TRUE</code> as well; see <code><a href="../reference/carp.control.html">?carp.control</a></code> for additional fitting options as well as examples in the <a href="clustRvizDetails.html">clustRviz Details Vignette</a></p>
<p>Once fitted, a brief description of the fit and parameter choices may be shown</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">carp.fit
<span class="co">#&gt; CARP Fit Summary</span>
<span class="co">#&gt; ====================</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Algorithm:  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Available Visualizations:</span>
<span class="co">#&gt;  - Static Dendrogram:          TRUE </span>
<span class="co">#&gt;  - Static Cluster Path:        TRUE </span>
<span class="co">#&gt;  - Interactive Visualization:  TRUE </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Number of Observations:  32 </span>
<span class="co">#&gt; Number of Variables:     4 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Pre-processing options:</span>
<span class="co">#&gt;  - Columnwise centering:  TRUE </span>
<span class="co">#&gt;  - Columnwise scaling:    TRUE </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; RBF Kernel Weights:</span>
<span class="co">#&gt;  - phi =  0.1 </span>
<span class="co">#&gt;  - K   =  3 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Raw Data:</span>
<span class="co">#&gt;       SG  VP V10  EP</span>
<span class="co">#&gt; A   50.8 8.6 190 205</span>
<span class="co">#&gt; A.1 50.8 8.6 190 275</span>
<span class="co">#&gt; A.2 50.8 8.6 190 345</span>
<span class="co">#&gt; A.3 50.8 8.6 190 407</span>
<span class="co">#&gt; B   40.8 3.5 210 218</span></code></pre></div>
<p>Visualizing the solution path is readily done via the <code>plot</code> function. A traditional dendrogram is displayed by default:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(carp.fit)</code></pre></div>
<p><img src="QuickStart_files/figure-html/unnamed-chunk-4-1.png" width="480" style="display: block; margin: auto;"></p>
<p>A more detailed visualization of the solution path can be obtained by plotting the principal components of the cluster means:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(carp.fit,<span class="dt">type =</span> <span class="st">'path'</span>,<span class="dt">percent =</span> <span class="fl">.10</span>)</code></pre></div>
<p><img src="QuickStart_files/figure-html/unnamed-chunk-5-1.png" width="480" style="display: block; margin: auto;"></p>
<p>The plot above displays the first two principal components of the data, with black points representing the original data, and red curves illustrating movement along the solution path. As curves join together, observations are fused, and clusters formed. The <code>percent</code> argument tells <code>plot</code> to display a snapshot of the clustering solution path at <span class="math inline">\(10\%\)</span> of total regularization.</p>
<p>Both the dendrogram and the clustering solution path may be viewed together interactively via the use of <code>shiny</code> applications:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(carp.fit,<span class="dt">type =</span> <span class="st">'interactive'</span>)</code></pre></div>
<p>These interactive visualizations allow one to view the cluster solution path and dendrogram as the Algorithmic Regularization iterates vary.</p>
<p>In addition to visualizations, cluster solutions may be obtained via the <code>clustering</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get the 3 cluster solution along the path</span>
carp.clusters &lt;-<span class="st"> </span><span class="kw"><a href="../reference/clustering.html">clustering</a></span>(carp.fit,<span class="dt">k =</span> <span class="dv">3</span>)
<span class="co"># display the labels</span>
<span class="kw">table</span>(carp.clusters<span class="op">$</span>clustering.assignment)
<span class="co">#&gt; </span>
<span class="co">#&gt; cl1 cl2 cl3 </span>
<span class="co">#&gt;   4  16  12</span>
<span class="co"># display the cluster mean</span>
<span class="kw">head</span>(carp.clusters<span class="op">$</span>cluster.means)
<span class="co">#&gt;        cl1       cl2       cl3</span>
<span class="co">#&gt; [1,]  50.8  38.34375  36.60833</span>
<span class="co">#&gt; [2,]   8.6   5.20000   1.35000</span>
<span class="co">#&gt; [3,] 190.0 222.62500 283.83333</span>
<span class="co">#&gt; [4,] 308.0 316.87500 360.41667</span></code></pre></div>
<p>In the code above, we specify the number of clusters and <code>clustering</code> returns the both the cluster assignment as well as the cluster means for the <span class="math inline">\(k=3\)</span> solution along the path. As an example, we display the yield (<code>Y</code>) distribution for each of the clusters:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(
  <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x=</span>cl,<span class="dt">y=</span>yield),
  <span class="dt">data=</span><span class="kw">data.frame</span>(
    <span class="dt">yield =</span> petrol<span class="op">$</span>Y,
    <span class="dt">cl=</span>carp.clusters<span class="op">$</span>clustering.assignment
  )
) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_boxplot">geom_boxplot</a></span>()</code></pre></div>
<p><img src="QuickStart_files/figure-html/unnamed-chunk-8-1.png" width="480" style="display: block; margin: auto;"></p>
<p>After exploring visualizations and cluster solutions interactively, the visualization results can easily be exported via the <code>saveviz</code> function. For example, saving the cluster solution path plotted above may be done as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/saveviz.html">saveviz</a></span>(
  <span class="dt">x=</span>carp.fit,
  <span class="dt">file.name=</span><span class="st">"ClusterPathStatic.png"</span>,
  <span class="dt">plot.type=</span><span class="st">'path'</span>,
  <span class="dt">image.type =</span> <span class="st">'static'</span>,
  <span class="dt">percent=</span>.<span class="dv">10</span>)</code></pre></div>
<p>The above saves a static snapshot of the cluster solution path at <span class="math inline">\(10\%\)</span> regularization; the number of clusters <code>k</code> may also be specified instead of <code>percent</code>. Interactive visualization may be saved as <code>.gif</code> files by specifiying <code>image.type='dynamic'</code>; see <code><a href="../reference/saveviz.CARP.html">?saveviz.CARP</a></code> for details.</p>
</div>
</div>
<div id="a-biclustering-example" class="section level1">
<h1 class="hasAnchor">
<a href="#a-biclustering-example" class="anchor"></a>A Biclustering Example</h1>
<p>Clustering may also be done simultaneously on both observations and variables. <code>clustRviz</code> obtains such biclustering solutions by approximating the Convex Biclustering solution path, again via Algorithmic Regularization. The <code>CBASS</code> function is used to obtain biclustering solutions, and its usage is similar to <code>CARP</code>.</p>
<p>We fit the biclustering solution path as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/CBASS.html">CBASS</a></span>(
  <span class="dt">X=</span>Xdat,
  <span class="dt">control=</span><span class="kw">list</span>(
    <span class="dt">obs.labels =</span> petrol<span class="op">$</span>No
  )) -&gt;<span class="st"> </span>cbass.fit</code></pre></div>
<p>Once fitted, vizualizations are displayed again via the <code>plot</code> function. For CBASS fits, the default visualization is again the cluster dendrogram of the observations induced by the CBASS solution path.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(cbass.fit)</code></pre></div>
<p><img src="QuickStart_files/figure-html/unnamed-chunk-11-1.png" width="480" style="display: block; margin: auto;"></p>
<p>Since both observations and variables are clustered simultaneously, a cluster dendrogram for the variables may also be plotted:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(cbass.fit,<span class="dt">type=</span><span class="st">'var.dendrogram'</span>)</code></pre></div>
<p>Additionally both dendrograms and the associated cluster heatmap can be viewed by passing the <code>heatmap</code> arguement.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(cbass.fit,<span class="dt">type=</span><span class="st">'heatmap'</span>)</code></pre></div>
<p><img src="QuickStart_files/figure-html/unnamed-chunk-13-1.png" width="960" style="display: block; margin: auto;"></p>
<p>As was the case of <code>CARP</code>, interactive visualizations may also be displayed:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(cbass.fit,<span class="dt">type=</span><span class="st">'interactive'</span>)</code></pre></div>
<p><code>CBASS</code>’s interactive visualizations allows one to view dynamic changes in the cluster heatmap and dendrogram solutions along the path.</p>
<p>As was the case with <code>CARP</code>, clustering solutions are obtained via the <code>clustering</code> function. The desired clustering solution is returned by specifying either the number of observation clusters (<code>k.obs</code>), the number of variable clusters (<code>k.var</code>), or the percent of regularization (<code>percent</code>). In any case, <code>clustering</code> returns the observation and variable clustering assignments, as well as the matrix of cluster means.</p>
<p>In the example below we obtain the biclustering solution which obtains <span class="math inline">\(3\)</span> observation clusters:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># obtain the desired clustering solution along the path</span>
cbass.clusters &lt;-<span class="st"> </span><span class="kw"><a href="../reference/clustering.html">clustering</a></span>(cbass.fit,<span class="dt">k.obs =</span> <span class="dv">3</span>)
<span class="co"># observation clusters</span>
<span class="kw">table</span>(cbass.clusters<span class="op">$</span>clustering.assignment.obs)
<span class="co">#&gt; </span>
<span class="co">#&gt; cl1 cl2 cl3 </span>
<span class="co">#&gt;  13  11   8</span>
<span class="co"># variable clusters</span>
<span class="kw">table</span>(cbass.clusters<span class="op">$</span>clustering.assignment.var)
<span class="co">#&gt; </span>
<span class="co">#&gt; cl1 cl2 cl3 </span>
<span class="co">#&gt;   2   1   1</span>
<span class="co"># mean matrix</span>
cbass.clusters<span class="op">$</span>cluster.mean.matrix[,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]
<span class="co">#&gt;             A         A          A          A         B</span>
<span class="co">#&gt; SG  -131.3101 -131.3101 -133.44716 -133.29375 -131.3101</span>
<span class="co">#&gt; VP  -131.3101 -131.3101 -133.44716 -133.29375 -131.3101</span>
<span class="co">#&gt; V10   72.5899   72.5899   96.74375   97.99375   72.5899</span>
<span class="co">#&gt; EP   104.1284  104.1284  204.10739  261.49375  104.1284</span></code></pre></div>
<p>Finally we demonstrate how to save the visualizations produced by <code>CBASS</code>. Similar to <code>CARP</code> visualizations can be saved via the <code>saveviz</code> function which allows for saving static and dynamic visuals. For example, a <code>.gif</code> of the variable dendrogram as it varies throughout the path may be saved via:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/saveviz.html">saveviz</a></span>(<span class="dt">x=</span>cbass.fit,
        <span class="dt">file.name =</span> <span class="st">'cbass_vardend_dynamic.png'</span>,
        <span class="dt">plot.type =</span> <span class="st">'var.dendrogram'</span>,
        <span class="dt">image.type =</span> <span class="st">'dynamic'</span>
)</code></pre></div>
<p>Similarly, a static snapshot of the bicluster heatmap at the moment along the path when <span class="math inline">\(4\)</span> observation clusters are formed may be saved also:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/saveviz.html">saveviz</a></span>(<span class="dt">x=</span>cbass.fit,
        <span class="dt">file.name =</span> <span class="st">'cbass_heatmap_static_kobs.png'</span>,
        <span class="dt">plot.type =</span> <span class="st">'heatmap'</span>,
        <span class="dt">image.type =</span> <span class="st">'static'</span>,
        <span class="dt">k.obs =</span> <span class="dv">4</span>
)</code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#a-clustering-example">A Clustering Example</a></li>
      <li><a href="#a-biclustering-example">A Biclustering Example</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by John Nagorski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
